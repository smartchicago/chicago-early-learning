{% comment %}
Copyright (c) 2012 Azavea, Inc.
See LICENSE in the project root for copying permission
{% endcomment %}

{% load i18n %}
{% load staticfiles %}
{% load static %}
<!DOCTYPE html> 
<html> 
  <head>
    <title>{% block title %}{% endblock %}</title> 
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <link rel="icon" href='{% static "favicon.ico" %}' type="image/x-icon">
    <link rel="shortcut icon" href='{% static "favicon.ico" %}' type="image/x-icon">
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.2/leaflet.css" />
    <link href='{% static "css/bootstrap.css" %}' rel="stylesheet">
    <link href='{% static "css/application.css" %}' rel="stylesheet">
    <link href='{% static "css/responsive.css" %}' rel="stylesheet">
    <link href='{% static "css/jquery-ui-1.10.3.autocomplete.min.css" %}' rel="stylesheet">

    <!--[if lt IE 9]>
      <script src='{% static "js/html5shiv.js" %}'></script>
    <![endif]-->
        
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', '{{ ga_key }}']);
        _gaq.push(['_trackPageview', '{{ request.path }}']);
        _gaq.push(function() {
            _gat._createTracker('{{ ga_key }}', 'outlinkTracker');
        });
    </script>
    {% block otherhead %}{% endblock %}
  </head> 
  <body>
    <!-- Navbar -->
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <!-- Navbar LEFT -->
        <div class="navbar-left">
          <a class="brand" href="index.html" data-r1024="<img src='{% static "img/logo.svg" %}' id='logo' alt='CEL'> Chicago Early Learning"><img src='{% static "img/logo.svg" %}' id="logo" alt="CEL"></a>
          <form class="navbar-form" id="desktop-search">
            <div class="input-append">
              <input id="appendedInputButton" class="autocomplete-searchbox" type="text" placeholder="121 N. Lasalle, Chicago">
              <button class="btn geolocation-button" id="geolocation" type="button"><i class="icon-screenshot"></i></button>
            </div>
            <button type="submit" class="btn btn-info" style="margin-top: -5px;" id="searchBtn"><i class="icon-search icon-white"></i> Search</a>
          </form>
        </div>
        <!-- Navbar RIGHT -->
        <div class="navbar-right">
          <ul class="nav">
            <li><a href="#text-for-info" data-toggle="modal" data-r1024="Text For Info"><img src='{% static "img/icons/text-for-info.svg" %}' alt="Text For Info"></a></li>
            <li><a href="about.html" data-r1024="About"><img src='{% static "img/icons/about.svg" %}' alt="About"></a></li>
            <li><a href="faq.html" data-r1024="FAQ"><img src='{% static "img/icons/faq.svg" %}'></a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-r767="Language <b class='caret'></b>">EN <b class="caret"></b></a>
              <ul class="dropdown-menu pull-right">
                <li><a href="#"><img src='{% static "img/en.png" %}' alt="English"> English</a></li>
                <li><a href="#"><img src='{% static "img/es.png" %}' alt="Spanish"> Espa&ntilde;ol</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
    {% block content %}{% endblock %}

    <!-- Text-for-Info Modal -->
    <div id="text-for-info" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="textForInfo" aria-hidden="true">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="icon-remove-circle"></i></button>
        <h3 id="textForInfo">Want information via text?</h3>
      </div>
      <div class="modal-body">
        <p>Text your zip code to <a href="sms:7738861819">(773) 886-1819</a> and we'll do the rest.</p>
      </div>
    </div>

    <script type="text/javascript" src="{% url django.views.i18n.javascript_catalog %}"></script>
    <script type="text/javascript">
    (function() {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
    })();
    </script>
    
    <script src='{% static "js/require.js" %}'></script>
    <script src='{% static "js/require-config.js" %}'></script>
    <script>
        requirejs.config({
            //By default load any module IDs from js/lib
            baseUrl: ('{{ settings.DEBUG }}' === 'True' ?
                '{% static "js/cel" %}' : '{% static "js/cel-build" %}')
        });
         
        // Cheat to win, make a global object
        // We need this because:
        //   a) We can only render this in a django template
        //   b) We need access to the GOOGLE_MAPS_KEY to load google maps using require.
        //      If we put it in an AMD module, we have to first load the module, then 
        //      have a nested require statement to load google maps, which is a PITA.
        //      
        // So, if you need to require google maps, do something like
        // define([CEL.serverVars.gmapRequire], function() { ... })
        CEL = {
            serverVars: {
                latSettings: '{{ settings.LATITUDE }}',
                lngSettings: '{{ settings.LONGITUDE}}',
                gmapKey: '{{ settings.GOOGLE_MAPS_KEY }}',
                gmapRequire: 'async!http://maps.googleapis.com/maps/api/js?v=3.2&key=' +
                    '{{ settings.GOOGLE_MAPS_KEY }}' + '&sensor=false',
                autocomplete: {
                    swlat: {{ settings.AUTOCOMPLETE.SW_LAT }},
                    swlng: {{ settings.AUTOCOMPLETE.SW_LNG }},
                    nelat: {{ settings.AUTOCOMPLETE.NE_LAT }},
                    nelng: {{ settings.AUTOCOMPLETE.NE_LNG }}
                }
            }
        };
        
        // This forces loading of minified common libs rather than loading them separately
        require(['common'], function() { });
     </script>

    {% block scripts %}{% endblock %}
  </body> 
</html> 
